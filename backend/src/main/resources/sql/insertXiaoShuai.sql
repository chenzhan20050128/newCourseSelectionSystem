-- =================================================================================================
-- 插入演示用户“小帅”及其相关数据
-- 场景：大二转专业学生，辅修金融，需要展示毕业要求进度缺口、AI推荐课程、课表冲突可视化
-- =================================================================================================

USE ncss;

-- 1. 确保有一个进行中的选课轮次，以便演示选课功能
-- 更新 "2024-2025学年第二学期选课 - 第二轮选课" (假设ID为5) 为进行中
UPDATE elective_batches 
SET status = '进行中', 
    start_time = '2025-12-01 08:00:00', 
    end_time = '2025-12-30 23:59:59' 
WHERE batch_name = '2024-2025学年第二学期选课' AND round_name = '第二轮选课';

-- 2. 插入学生：小帅
-- ID: 241250001, 密码: 123456 (MD5: e10adc3949ba59abbe56e057f20f883e)
DELETE FROM students WHERE student_id = 241250001;
INSERT INTO students (student_id, student_name, birth_date, college, password) 
VALUES (241250001, '小帅', '2004-05-20', '软件学院', 'e10adc3949ba59abbe56e057f20f883e');

-- 3. 插入演示用课程：金融工程 (AI推荐课程)
-- ID: 99999999, 时间: 周二 3-4节 (与操作系统冲突)
DELETE FROM courses WHERE course_id = 99999999;
INSERT INTO courses (course_id, course_name, credits, description, college, instructor_name, campus, classroom, start_week, end_week, capacity, enrolled_count, type)
VALUES (99999999, '金融工程', 3, '金融工程入门课程，适合理工科背景学生', '商学院', '王金融', '鼓楼校区', '安中楼202', 1, 18, 50, 10, '专业选修');

DELETE FROM course_sessions WHERE course_id = 99999999;
INSERT INTO course_sessions (course_id, weekday, start_period, end_period, week_type)
VALUES (99999999, '周二', 3, 4, 0);

-- 4. 插入已修课程 (Status: '已修')
-- 目的：展示毕业要求进度。
-- 通识课 (目标10，已修8): 200090(2), 200320(2), 200340(2), 200400(2)
-- 学科基础课程 (目标64，已修6 - 严重不足): 25000700(3), 25000060(3)
-- 大学数学 (已修5): 100111(5)
-- 大学英语 (已修2): 200221(2)

INSERT INTO enrollments (student_id, course_id, enrolled_at, final_grade, status) VALUES
-- 通识课
(241250001, 200090, '2024-01-10 10:00:00', 85, '已修'), -- 高科技产品探究
(241250001, 200320, '2024-01-10 10:00:00', 88, '已修'), -- 数论探究
(241250001, 200340, '2024-01-10 10:00:00', 90, '已修'), -- 水与废水处理新技术
(241250001, 200400, '2024-01-10 10:00:00', 92, '已修'), -- 物理生物学
-- 学科基础课程
(241250001, 25000700, '2024-01-10 10:00:00', 80, '已修'), -- C语言程序设计基础
(241250001, 25000060, '2024-01-10 10:00:00', 82, '已修'), -- 数据结构与算法
(241250001, 25000210, '2024-01-10 10:00:00', 85, '已修'), -- 计算机组织结构
(241250001, 25000510, '2024-01-10 10:00:00', 84, '已修'), -- 互联网计算
(241250001, 25000520, '2024-01-10 10:00:00', 86, '已修'), -- 数据管理基础
-- 大学数学
(241250001, 100111, '2024-01-10 10:00:00', 78, '已修'), -- 微积分I(第一层次)
-- 大学英语
(241250001, 200221, '2024-01-10 10:00:00', 85, '已修'); -- 基础学术英语-读写

-- 5. 插入本学期已选课程 (Status: '已选')
-- 操作系统 (ID: 22020230, 周二 3-4节)
-- 金融工程 (ID: 99999999, 周二 3-4节) -> 制造冲突

INSERT INTO enrollments (student_id, course_id, enrolled_at, final_grade, status) VALUES
(241250001, 22020230, NOW(), NULL, '已选'), -- 操作系统
(241250001, 99999999, NOW(), NULL, '已选'), -- 金融工程 (冲突)
(241250001, 25010820, NOW(), NULL, '已选'), -- 面向服务的软件工程
(241250001, 25010850, NOW(), NULL, '已选'), -- 移动互联网软件工程
(241250001, 22010050, NOW(), NULL, '已选'); -- 计算机网络

