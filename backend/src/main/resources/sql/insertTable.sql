USE ncss;

-- 删除所有表中的数据（按外键依赖关系的逆序删除）
-- 先删除依赖其他表的子表数据
DELETE FROM enrollments;        -- 选课表（依赖students和courses）
DELETE FROM course_sessions;    -- 课程时间段表（依赖courses）
DELETE FROM courses;            -- 课程表
DELETE FROM elective_batches;   -- 选课轮次表
DELETE FROM students;           -- 学生表

-- 插入 students（学生表）
INSERT INTO students (student_id, student_name, birth_date, college, password) VALUES
-- 计算机学院学生
(2022001, '张三', '2002-03-15', '计算机学院', 'stu123'),
(2022002, '张明', '2002-05-20', '计算机学院', 'stu124'),
(2022003, '李华', '2003-01-10', '计算机学院', 'stu125'),
(2022004, '王磊', '2002-08-15', '计算机学院', 'stu126'),
-- 数学学院学生
(2022005, '李四', '2001-07-21', '数学学院', 'stu456'),
(2022006, '陈数', '2002-02-14', '数学学院', 'stu457'),
(2022007, '刘学', '2003-06-30', '数学学院', 'stu458'),
-- 信息工程学院学生
(2022008, '王五', '2003-11-09', '信息工程学院', 'stu789'),
(2022009, '赵信', '2002-04-18', '信息工程学院', 'stu790'),
(2022010, '孙工', '2003-09-25', '信息工程学院', 'stu791'),
-- 文学院学生
(2022011, '文静', '2002-03-20', '文学院', 'stu101'),
(2022012, '诗雅', '2001-12-05', '文学院', 'stu102'),
(2022013, '书涵', '2003-07-15', '文学院', 'stu103'),
(2022014, '墨轩', '2002-11-22', '文学院', 'stu104'),
-- 历史学院学生
(2022015, '史明', '2001-09-10', '历史学院', 'stu201'),
(2022016, '古韵', '2002-05-28', '历史学院', 'stu202'),
(2022017, '传承', '2003-03-12', '历史学院', 'stu203'),
-- 哲学学院学生
(2022018, '思辨', '2001-10-15', '哲学学院', 'stu301'),
(2022019, '智慧', '2002-08-20', '哲学学院', 'stu302'),
(2022020, '真理', '2003-01-30', '哲学学院', 'stu303'),
-- 新闻传播学院学生
(2022021, '新闻', '2002-06-10', '新闻传播学院', 'stu401'),
(2022022, '传媒', '2001-11-25', '新闻传播学院', 'stu402'),
(2022023, '记者', '2003-04-18', '新闻传播学院', 'stu403'),
(2022024, '主播', '2002-09-12', '新闻传播学院', 'stu404'),
-- 法学院学生
(2022025, '法理', '2001-08-15', '法学院', 'stu501'),
(2022026, '正义', '2002-12-20', '法学院', 'stu502'),
(2022027, '律师', '2003-05-10', '法学院', 'stu503'),
(2022028, '法官', '2002-07-25', '法学院', 'stu504'),
-- 商学院学生
(2022029, '商学', '2001-09-18', '商学院', 'stu601'),
(2022030, '经济', '2002-03-22', '商学院', 'stu602'),
(2022031, '管理', '2003-10-05', '商学院', 'stu603'),
(2022032, '会计', '2002-06-15', '商学院', 'stu604'),
(2022033, '金融', '2001-12-28', '商学院', 'stu605'),
-- 物理学院学生
(2022034, '物理', '2002-04-10', '物理学院', 'stu701'),
(2022035, '力学', '2003-08-20', '物理学院', 'stu702'),
-- 化学学院学生
(2022036, '化学', '2002-05-15', '化学学院', 'stu801'),
(2022037, '有机', '2003-11-10', '化学学院', 'stu802'),
-- 生命科学学院学生
(2022038, '生物', '2002-07-20', '生命科学学院', 'stu901'),
(2022039, '遗传', '2003-02-14', '生命科学学院', 'stu902');

-- 插入选课轮次数据
INSERT INTO elective_batches (batch_name, round_name, start_time, end_time, selection_mode, selection_strategy, status, description) VALUES
('2024-2025学年第一学期选课', '第一轮选课', '2024-09-01 08:00:00', '2024-09-05 23:59:59', '志愿选课', '按志愿优先级分配，志愿相同时随机抽签', '已结束', '第一轮选课采用志愿制，学生可填报多个志愿，系统将根据志愿优先级进行分配'),
('2024-2025学年第一学期选课', '第二轮选课', '2024-09-10 08:00:00', '2024-09-15 23:59:59', '即选即中', '选课后立即生效，先到先得', '已结束', '第二轮选课采用即选即中模式，选课成功后立即生效'),
('2024-2025学年第一学期选课', '补退选', '2024-09-20 08:00:00', '2024-09-25 23:59:59', '先到先得', '有余量即可选，无余量则排队等候', '已结束', '补退选阶段可以退选已选课程或选择仍有余量的课程'),
('2024-2025学年第二学期选课', '第一轮选课', '2025-12-05 08:00:00', '2025-12-10 23:59:59', '志愿选课', '按志愿优先级分配，志愿相同时随机抽签', '进行中', '第一轮选课采用志愿制，学生可填报多个志愿，系统将根据志愿优先级进行分配'),
('2024-2025学年第二学期选课', '第二轮选课', '2025-12-12 08:00:00', '2025-12-17 23:59:59', '即选即中', '选课后立即生效，先到先得', '未开始', '第二轮选课采用即选即中模式，选课成功后立即生效'),
('2024-2025学年第二学期选课', '补退选', '2025-12-20 08:00:00', '2025-12-25 23:59:59', '先到先得', '有余量即可选，无余量则排队等候', '未开始', '补退选阶段可以退选已选课程或选择仍有余量的课程');


-- 插入 enrollments（选课表）
INSERT INTO enrollments (student_id, course_id, enrolled_at, final_grade, status) VALUES
(1, 1, '2024-02-20 09:00:00', 92.5, '已选'),
(1, 6, '2024-02-20 10:00:00', NULL, '已选'),
(1, 7, '2024-02-20 11:00:00', 88.0, '已选'),
(2, 2, '2024-02-21 09:00:00', 85.5, '已选'),
(2, 3, '2024-02-21 10:00:00', 90.0, '已选');

-- ========================================
-- 更新所有用户密码为统一的测试密码
-- 密码：123456 (MD5加密后：e10adc3949ba59abbe56e057f20f883e)
-- ========================================

-- 更新所有学生密码为 123456
UPDATE students SET password = 'e10adc3949ba59abbe56e057f20f883e';

